<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='src/js/d3.min.js' defer></script>
    <script src='src/js/toggleLogic.js' defer></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet' />
    <link href="src/styles/main.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i&amp;subset=cyrillic" rel="stylesheet">
  </head>
  <body>
  <div id="map"></div>
  <div class="headerInfo" onclick="toggleDescription(true)">
    <div class='header' > КАРТА ШУМА </div>
    <div class='info' onclick="toggleDescription(true)"> <img src="./src/info.svg" style="width:35px;height:35px;center"></div>
  </div>
  <div id='description'>
    <div class="tab">
      <div class="tablinks" onclick="openTab(event,'project')" id="defaultOpen"> О ПРОЕКТЕ </div>
      <div class="tablinks" onclick="openTab(event,'method')"> МЕТОДОЛОГИЯ </div>
      <button id="closeButton" class="tablinks" onclick="toggleDescription(false)">
        <img src="./src/close.svg" style="width:33px;height:28px;">
      </button>
    </div>

  <div id="project" class="tabcontent">
      <p> Изучение шума — важная задача в условиях мегаполиса, так как именно этот фактор загрязнения часто не учитывается, несмотря на своё большое влияние на организм человека. Традиционно шум измеряется в полевых условиях с множеством датчиков за большой период времени, который должен перекрывать не только дневные, сезонные, но и годовые изменения различных факторов. Естественно, такой процесс требует больших ресурсов, как технических, так и человеческих.
</p>
<p> </p>
<p> Команда Urbica исследует проблему городского шума, используя новые методы и современные технологии. Мы подготовили карту шумового загрязнения города Москвы, основанную на модели анализа распространения шума от определенных типов объектов и уточненную данными, полученными полевыми измерениями при помощи датчиков, разработанных и собранных самостоятельно.
     </p>
<p> </p>
<p> Проект релизуется в рамках летней стажировки </p>
<p> Кураторы проекта: </p>

<p> Анастасия Коновалова, Сергей Горбатюк</p>

<p> Участники проекта: </p>

<p1> Григорий Беляев, эколог,
Артём Саакян, инженер,
Андрей Асланов, аналитик,
Татьяна Иванникова, картограф</p1>

  </div>
    <div id="method" class="tabcontent">
      <h1> Что такое шумовое загрязнение и почему его важно изучать </h1>
        <p> Население городов растет (уровень урбанизации составляет 54,5% на конец 2016 года, что в абсолютных показателях равняется 4 миллиардам человек), вместе с тем растут и запросы горожан на качество жизни в городе, качество городской среды.
  Шумовое картографирование необходимо крупным городам, так как шумовое загрязнение - один из тех показателей качества среды, который влияет не только на комфорт жителей, но и на состояние их здоровья. Более 20 миллионов европейцев подвержены чрезмерному шумовому воздействию, из них около миллиона - имеют тяжелые заболевания органов слуха, связанные именно с этим фактором (RIVM, 2014)
  Карта шума - эффективный инструмент анализа шумового загрязнения города, позволяющий быстро и точно определить места, наиболее подверженные воздействию шума и выявить источники шума.
  Шумовое загрязнение неоднородно в пространстве и во времени, его распространение зависит от множества параметров городской среды. Именно поэтому необходимо создавать модели и изучать закономерности распространения шума для того чтобы упростить мониторинг городского шума.
</p>

    </div>
 </div>

 <div id='legend'>

            <div class="dbItem" > < 45 дБ </div>
            <div class="dbItem" > 55 дБ</div>
            <div class="dbItem" > > 60 дБ</div>
            <div class="legendItem"> </div>
  </div>
  <!-- <div id='time'>
    <div class="timePeriods">
          <div class='timeClass' > 7:00 - 10:00 </div>
          <div class='timeClass' > 10:00 - 12:00 </div>
          <div class='timeClass' > 12:00 - 15:00 </div>
          <div class='timeClass' > 15:00 - 20:00 </div>
          <div class='timeClass' > 20:00 - 23:00 </div>
    </div>
    <div class='timeLine' id='line' >
         <input id='slider' type='range' min='1' max='6' step='1' value='1'>
   </div>
  </div> -->
  <audio id="audioTrack">
      <source src="./data/sample.ogg" type="audio/ogg">
      <source src="./data/sample.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
  </audio>

<div id='sensorArea'>
      <div id='sensorValue'></div>
      <div id='sensorPoint'></div>
</div>

<div id="soundtrack" onclick="" >
  <div class = "sensorTitle">
    <div class = "sensorHead">Данные датчика за 60 секунд (пример записи)</div>
    <div class = "emptyCell"></div>
    <div class = "closeBtn" id="closeBtn"><img src="./src/invalid-name.svg">
</div>
  </div>


  <div class = "sensorContent" >
    <div class="btns">
     <div class="btn" id="btnDemoStart"><img src="./src/play.svg"></div>
     <div class="btn" id="btnDemoPause"><img src="./src/pause.svg"></div>
  </div>
  <div id="graphArea"></div>
  <div class="outputArea">
      <div class='param'>
        <div id='timeLabel'></div>
      </div>
      <div class='param'>
        <div class='paramTitle'>Машины </div>
        <div class="paramLine" id='vehiclesLine'></div>
        <div class='paramValue' id='vehicles'></div>
      </div>
      <div class='param'>
        <div class='paramTitle'>Люди </div>
        <div class="paramLine" id='peopleLine'></div>
        <div class='paramValue' id='people'></div>
      </div>
      <div class='param'>
        <div class='paramTitle'>Музыка </div>
        <div class="paramLine" id='musicLine'></div>
        <div class='paramValue' id='music'></div>
      </div>
      <div class='param'>
        <div class='paramTitle'>Ж/д </div>
        <div class="paramLine" id='railwayLine'></div>
        <div class='paramValue' id='railway'></div>
      </div>
    </div>
  </div>
</div>



    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoidGF0aWFuYWl2YW5uaWtvdmEiLCJhIjoiY2o0bzA3azRnMWd0ZTJ3cGcxdHd2NnUzYSJ9.2ps-jd_6FNsnteFLjqsvog';
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/light-v9',
        center: [31.4606, 20.7927],
        zoom: 0.5
      });

      // var time = [
      //   'morning', //0
      //   'day', //1
      //   'evening',//2
      //   'night'//3
      // ];
      //
      // function filterBy(time) {
      //   var filters = ['==', 'time', time];
      //   map.setFilter(' ', filters);
      //   map.setFilter(' ', filters);
      //
      //   // Set the label to the month
      //   document.getElementById('month').textContent = months[month];
      // }

      map.on('load', function () {

        d3.json('https://www.mapbox.com/mapbox-gl-js/assets/data/significant-earthquakes-2015.geojson', function (err, data) {
          if (err) throw err;

          // Create a month property value based on time
          // used to filter against.
          data.features = data.features.map(function (d) {
            d.properties.month = new Date(d.properties.time).getMonth();
            return d;
          });


          document.getElementById('slider').addEventListener('input', function (e) {
            var month = parseInt(e.target.value, 10);
            filterBy(time);
          });
        });
      });
    </script>
    <!-- Yandex.Metrika counter --> <script type="text/javascript" > (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter32348605 = new Ya.Metrika({ id:32348605, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/32348605" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
  </body>
</html>
